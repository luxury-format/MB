{{ $pages := .Site.RegularPages }}
{{ $pages = where $pages "Title" "ne" "" }}
{{ $pages = where $pages "IsPage" true }}
{{ $pages = where $pages "Kind" "eq" "page" }}
{{ $pages = where $pages ".IsHome" false }}
{{ $sorted := sort $pages "Permalink" }}

{{ if gt (len $sorted) 0 }}
<ul class="allpages">
    {{ range $sorted }}
    <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
</ul>
{{ end }}